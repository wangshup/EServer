rpg项目通信包序列化方式

一、包体结构：
通信包依次由5段组成
1）整包长度（字节数） 整型，占4字节
2）包头长度（字节数） 整型，占4字节
3）包头内容（字节流） 由CSPacketHead或SCPacketHead通过protobuf序列化实现
4）包身内容（字节流） 由自定义的protobuf类序列化及反序列化

二、反序列化方式
1）从建立连接后收到的第一个字节开始，先取4个字节，解析成整数tl
2）从第五个字节开始，取tl个字节作为一个包
3）从包里取头4字节解析为整数hl
4）取hl个字节，根据情况用CSPacketHead或者SCPacketHead解析
5）再取4个字节解析为整数bl
6）取bl个字节，根据情况有对应的protobuf类反序列化为客户数据

三、序列化方式
1）根据情况把数据填进CSPacketHead或者SCPacketHead，并用protobuf序列化
2）序列化得到的字节流的长度（整型）转为字节流，并在该字节流后拼上第1步中序列化得到的字节流
3）根据情况把数据填进相应的protobuf类，并用protobuf序列化
4）把第2步中的字节流续接上第3步中的字节流
5）求得第4步的字节流长度（整型）转为字节流，并在该字节流后拼上第4步中序列化得到的字节流
